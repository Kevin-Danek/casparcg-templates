<!DOCTYPE html>
<html lang="en" class="modra">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Start Overlay</title>
    <link rel="stylesheet" href="assets/output.css" />
    <script src="./assets/gsap.min.js"></script>
    <script name="graphics-data-definition" type="application/json+gdd" src="start.gdd.json"></script>

    <script>

        const timeline = new gsap.timeline()
            .add('start')
            .fromTo(
                "#home-bar",
                { y: "100%" },
                { y: "0%", duration: 0.3 },
                "start")
            .fromTo(
                "#away-bar",
                { y: "-100%" },
                { y: "0%", duration: 0.3 },
                "start"
            )
            .add("secondaries")
            .fromTo(
                "#round-bar",
                { y: "100%" },
                { y: "0%", duration: 0.3 },
                "secondaries"
            )
            .fromTo(
                "#venue-bar",
                { y: "-100%" },
                { y: "0%", duration: 0.3 },
                "secondaries"
            )

        async function play() {
            gsap.set("#home-bar", { y: "-100%" });
            gsap.set("#away-bar", { y: "100%" });
            document.getElementById("wrapper").classList.remove("hidden");

            new gsap.timeline()
                .fromTo("#divider", { opacity: 0 }, { opacity: 1, duration: 0.2 })
                .add('start')
                .fromTo(
                    "#home-bar",
                    { y: "100%" },
                    { y: "0%", duration: 0.2 },
                    "start")
                .fromTo(
                    "#away-bar",
                    { y: "-100%" },
                    { y: "0%", duration: 0.2 },
                    "start"
                )
                .add("secondaries")
                .fromTo(
                    "#round-bar",
                    { y: "100%" },
                    { y: "0%", duration: 0.2 },
                    "secondaries"
                )
                .fromTo(
                    "#venue-bar",
                    { y: "-100%" },
                    { y: "0%", duration: 0.2 },
                    "secondaries"
                )
        }

        function stop() {
            new gsap.timeline()
                .add("secondaries")
                .fromTo(
                    "#round-bar",
                    { y: "0%" },
                    { y: "100%", duration: 0.2 },
                    "secondaries"
                )
                .fromTo(
                    "#venue-bar",
                    { y: "0%" },
                    { y: "-100%", duration: 0.2 },
                    "secondaries"
                )
                .add('start')
                .fromTo(
                    "#home-bar",
                    { y: "0%" },
                    { y: "100%", duration: 0.2 },
                    "start")
                .fromTo(
                    "#away-bar",
                    { y: "0%" },
                    { y: "-100%", duration: 0.2 },
                    "start"
                )
                .fromTo("#divider", { opacity: 1 }, { opacity: 0, duration: 0.2 })
        }

        function next() {
            console.log('next()')
        }

        async function update(raw) {
            try {
                const data = JSON.parse(raw);

                if (data.round) document.getElementById("round-value").textContent = data.round;
                if (data.venue) document.getElementById("venue-value").textContent = data.venue;

                if (data.home) {
                    if (data.home.name) document.getElementById("home-name").textContent = data.home.name;
                    if (data.home.color) document.getElementById("home-color").setAttribute("style", "background: " + data.home.color);
                    if (data.home.logo) document.getElementById("home-logo").setAttribute("src", data.home.logo);
                }

                if (data.away) {
                    if (data.away.name) document.getElementById("away-name").textContent = data.away.name;
                    if (data.away.color) document.getElementById("away-color").setAttribute("style", "background: " + data.away.color);
                    if (data.away.logo) document.getElementById("away-logo").setAttribute("src", data.away.logo);
                }

            } catch (err) {
                console.error(err)
            }
        }

        window.update = update;
    </script>
</head>

<body class="w-screen h-screen overflow-hidden grid place-items-center justify-center px-16 py-12">
    <section id="wrapper" class="overflow-hidden flex flex-col hidden">

        <div class="overflow-hidden mr-auto">
            <div id="round-bar"
                class="bg-primary bg-primary-foreground text-2xl px-4 py-2 uppercase font-medium min-w-xs mr-auto">
                <span id="round-value"></span>
            </div>
        </div>

        <div class="overflow-hidden">
            <div id="home-bar"
                class="bg-primary text-primary-foreground p-6 text-5xl font-bold uppercase min-w-4xl flex justify-between items-center mr-32">
                <div class="flex items-center gap-8">
                    <span id="home-color" class="h-16 w-2"></span>
                    <span id="home-name">LOREM IPSUM</span>
                </div>

                <img id="home-logo" class="w-20 h-20 object-contain" />
            </div>
        </div>

        <div id="divider" class="bg-divider h-1 w-full"></div>

        <div class="overflow-hidden">
            <div id="away-bar"
                class="bg-primary text-primary-foreground p-6 text-5xl font-bold uppercase min-w-4xl flex justify-between items-center ml-32">
                <img id="away-logo" class="w-20 h-20 object-contain" />

                <div class="flex items-center gap-8">
                    <span id="away-name">LOREM IPSUM</span>
                    <span id="away-color" class="h-16 w-2"></span>
                </div>
            </div>
        </div>

        <div class="overflow-hidden ml-auto">
            <div id="venue-bar"
                class="bg-primary bg-primary-foreground text-2xl px-4 py-2 uppercase font-medium min-w-xs ml-auto text-right">
                <span id="venue-value"></span>
            </div>
        </div>
    </section>
</body>

</html>